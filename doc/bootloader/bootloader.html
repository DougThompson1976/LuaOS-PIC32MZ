<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, minimal-ui">
    <title>Bootloader</title>
    <link type="text/css" rel="stylesheet" href="assets/css/github-markdown.css">
    <link type="text/css" rel="stylesheet" href="assets/css/pilcrow.css">
    <link type="text/css" rel="stylesheet" href="assets/css/hljs-github.min.css"/>
  </head>
  <body>
    <article class="markdown-body"><h1 id="bootloader"><a class="header-link" href="#bootloader"></a>Bootloader</h1>
<p>The whitecat has a built-in bootloader for upgrade the board&#39;s firmware. Using 
the bootloader you don&#39;t need any additional hardware for upgrade your board.</p>
<p>Whitecat bootloader uses the STK500 communication protocol, so you can use any 
STK500 compatible software on your desktop for upgrade the board. We recommend 
to use <a href="https://github.com/sergev/pic32prog">pic32prog</a>.</p>
<h3 id="whow-to-use-the-bootloader"><a class="header-link" href="#whow-to-use-the-bootloader"></a>Whow to use the bootloader</h3>
<h4 id="1-install-the-desktop-software"><a class="header-link" href="#1-install-the-desktop-software"></a>1. Install the desktop software</h4>
<p>For Mac OS:</p>
<pre class="hljs"><code><span class="hljs-variable">$ </span>cd /usr/local/bin
<span class="hljs-variable">$ </span>sudo wget <span class="hljs-symbol">http:</span>/<span class="hljs-regexp">/whitecatboard.org/dist</span><span class="hljs-regexp">/desktop/mac</span><span class="hljs-regexp">/pic32prog</span></code></pre><h4 id="2-get-last-whitecat-firmware"><a class="header-link" href="#2-get-last-whitecat-firmware"></a>2. Get last whitecat firmware</h4>
<p>For Mac OS:</p>
<pre class="hljs"><code>$ cd <span class="hljs-variable">$HOME</span>
$ wget http://whitecatboard.org/dist/whitecat.hex</code></pre><h4 id="3-close-terminal-sessions"><a class="header-link" href="#3-close-terminal-sessions"></a>3. Close terminal sessions</h4>
<p>If you are connected to the whitecat console close your terminal program (
minicom, hyperterminal, etc ...).</p>
<h4 id="4-upgrade-whitecat-firmware"><a class="header-link" href="#4-upgrade-whitecat-firmware"></a>4. Upgrade whitecat firmware</h4>
<p>First reset the whitecat connecting MLCR (P05) to GND (P04) for a little while, 
then disconnectc MLCR (P05) from GND (P04), and in the next 4 seconds, run one 
of the folowwing commands.</p>
<p>For Mac OS:</p>
<pre class="hljs"><code>$ pic32prog -S -d /dev/tty<span class="hljs-class">.SLAB_USBtoUART</span> whitecat.hex</code></pre><h3 id="whow-to-upgrade-the-bootloader"><a class="header-link" href="#whow-to-upgrade-the-bootloader"></a>Whow to upgrade the bootloader</h3>
<p>For upgrade the bootloader you need additional hardware. We recommend to use 
<a href="http://www.microchip.com/Developmenttools/ProductDetails.aspx?PartNO=DV164121">PICkit 2</a>. </p>
<h4 id="1-install-the-desktop-software-1"><a class="header-link" href="#1-install-the-desktop-software-1"></a>1. Install the desktop software</h4>
<p>For Mac OS:</p>
<pre class="hljs"><code><span class="hljs-variable">$ </span>cd /usr/local/bin
<span class="hljs-variable">$ </span>sudo wget <span class="hljs-symbol">http:</span>/<span class="hljs-regexp">/whitecatboard.org/dist</span><span class="hljs-regexp">/desktop/mac</span><span class="hljs-regexp">/pic32prog</span></code></pre><h4 id="2-get-last-whitecat-bootloader"><a class="header-link" href="#2-get-last-whitecat-bootloader"></a>2. Get last whitecat bootloader</h4>
<p>For Mac OS:</p>
<pre class="hljs"><code>$ cd <span class="hljs-variable">$HOME</span>
$ wget http://whitecatboard.org/dist/bootloader.hex</code></pre><h4 id="3-connect-pickit-2"><a class="header-link" href="#3-connect-pickit-2"></a>3. Connect PICkit 2</h4>
<p>Connect the PICkit 2 device to the whitecat:</p>
<table>
<thead>
<tr>
<th>whitecat pin</th>
<th style="text-align:center">PICkit 2 pin</th>
</tr>
</thead>
<tbody>
<tr>
<td>P05 (MCLR)</td>
<td style="text-align:center">1</td>
</tr>
<tr>
<td>P14 (RB6)</td>
<td style="text-align:center">5</td>
</tr>
<tr>
<td>P15 (RB7)</td>
<td style="text-align:center">4</td>
</tr>
</tbody>
</table>
<p>Then connect PICkit 2 to a free USB port on your desktop.</p>
<h4 id="4-connect-the-whitecat"><a class="header-link" href="#4-connect-the-whitecat"></a>4. Connect the whitecat</h4>
<p>Connect the whitecat to a free USB port on your desktop.</p>
<h4 id="5-upgrade-whitecat-bootloader"><a class="header-link" href="#5-upgrade-whitecat-bootloader"></a>5. Upgrade whitecat bootloader</h4>
<p>For Mac OS:</p>
<pre class="hljs"><code>$ pic32prog -S bootloader.<span class="hljs-built_in">hex</span></code></pre>    </article>
  </body>
</html>
