<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, minimal-ui">
    <title>net module</title>
    <link type="text/css" rel="stylesheet" href="assets/css/github-markdown.css">
    <link type="text/css" rel="stylesheet" href="assets/css/pilcrow.css">
    <link type="text/css" rel="stylesheet" href="assets/css/hljs-github.min.css"/>
  </head>
  <body>
    <article class="markdown-body"><h1 id="net-module"><a class="header-link" href="#net-module"></a>net module</h1>
<p>This module contains functions for accessing a TCP/IP network from the whitecat
and manage the network interfaces. The whitecat needs an specific connectivity 
shield in order to use this module.</p>
<p>Interfaces are identified by it&#39;s name, and can be one of this:</p>
<ul class="list">
<li>en: ethernet interface</li>
<li>gprs: gprs interface</li>
<li>wf: wifi interface (not supported in this release)</li>
</ul>
<p>For use this module it&#39;s mandatory to do this initialization sequence:</p>
<ul class="list">
<li>setup the interface using net.setup function</li>
<li>start the interface using net.start function</li>
</ul>
<p>Once all network interaction is done you can stop the interface using net.stop 
function. This is a good practice for battery-friendly applications.</p>
<h2 id="net-setup-interface-apn-pin-for-gprs-interface"><a class="header-link" href="#net-setup-interface-apn-pin-for-gprs-interface"></a>net.setup(interface, apn, pin) - for GPRS interface</h2>
<p>Setup the gprs interface.</p>
<p>Arguments:</p>
<ul class="list">
<li>interface: interface name, use gprs for setup the gprs interface.</li>
<li>apn: apn name.</li>
<li>pin: SIM&#39;s pin.</li>
</ul>
<pre class="hljs"><code><span class="hljs-comment">-- Setup the GPRS interface for vodafone m2m, with a SIM card with pin 1234</span>
net.setup(<span class="hljs-string">"gprs"</span>, <span class="hljs-string">"m2m.vodafone.es"</span>, <span class="hljs-string">"1234"</span>)</code></pre><h2 id="net-start-interface-"><a class="header-link" href="#net-start-interface-"></a>net.start(interface)</h2>
<p>Start the network interface. It&#39;s mandatory to setup the interface before using 
net.setup function.</p>
<p>Arguments:</p>
<ul class="list">
<li>interface: interface name</li>
</ul>
<p>Returns:</p>
<ul class="list">
<li>success: true or false</li>
<li>error: error message, if not success</li>
</ul>
<pre class="hljs"><code><span class="hljs-comment">-- Start ethernet interface</span>

net.start(<span class="hljs-string">"en"</span>)</code></pre><h2 id="net-stop-interface-"><a class="header-link" href="#net-stop-interface-"></a>net.stop(interface)</h2>
<p>Stop the network interface.</p>
<p>Arguments:</p>
<ul class="list">
<li>interface: interface name</li>
</ul>
<p>Returns:</p>
<ul class="list">
<li>success: true or false</li>
<li>error: error message, if not success</li>
</ul>
<pre class="hljs"><code><span class="hljs-comment">-- Stop ethernet interface</span>

net.stop(<span class="hljs-string">"en"</span>)</code></pre><h2 id="net-stat-"><a class="header-link" href="#net-stat-"></a>net.stat()</h2>
<p>Show the status of each network interface.</p>
<p>Returns: nothing</p>
<pre class="hljs"><code>net.stat()

en: mac address <span class="hljs-number">00</span>:<span class="hljs-number">1</span>e:c0:c2:<span class="hljs-number">15</span>:<span class="hljs-number">44</span>
        ip address <span class="hljs-number">192.168</span><span class="hljs-number">.18</span><span class="hljs-number">.39</span> netmask <span class="hljs-number">255.255</span><span class="hljs-number">.255</span><span class="hljs-number">.0</span>
        gw address <span class="hljs-number">192.168</span><span class="hljs-number">.18</span><span class="hljs-number">.1</span>
        dns1 address <span class="hljs-number">8.8</span><span class="hljs-number">.8</span><span class="hljs-number">.8</span>
        dns2 address <span class="hljs-number">4.4</span><span class="hljs-number">.4</span><span class="hljs-number">.4</span></code></pre><h2 id="ip-net-packip-ip1-ip2-ip3-ip4-"><a class="header-link" href="#ip-net-packip-ip1-ip2-ip3-ip4-"></a>ip = net.packip(ip1, ip2, ip3, ip4)</h2>
<p>Returns packet representation of an IPv4 address that can be used with all 
net&#39;s module functions that require an IP address as argument. The IP address is
 provided from the 4 elements that make up an IPv4 address: ip1.ip2.ip3.ip4</p>
<p>Arguments:</p>
<ul class="list">
<li>ip1: the first part of the ip address</li>
<li>ip2: the second part of the ip address</li>
<li>ip3: the third part of the ip address</li>
<li>ip4: the fourth part of the ip address</li>
</ul>
<p>Returns: an integer that encodes the IP address.</p>
<pre class="hljs"><code>localhost = net.packip(<span class="hljs-number">127</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">1</span>)
<span class="hljs-built_in">print</span>(localhost)
<span class="hljs-number">16777343</span></code></pre><h2 id="ip-net-packip-ip-"><a class="header-link" href="#ip-net-packip-ip-"></a>ip = net.packip(&quot;ip&quot;)</h2>
<p>Returns a packet representation of an IPv4 address that can be used with all 
net&#39;s module functions that require an IP address as argument. The IP address is
 provided as the IPv4 canonical representation.</p>
<p>Arguments:</p>
<ul class="list">
<li>ip: the IP addres string in  IPv4 canonical representation</li>
</ul>
<p>Returns: an integer that encodes the IP address.</p>
<pre class="hljs"><code>localhost = net.packip(<span class="hljs-string">"127.0.0.1"</span>)
<span class="hljs-built_in">print</span>(localhost)
<span class="hljs-number">16777343</span></code></pre><h2 id="ip1-ip2-ip3-ip4-net-unpackip-ip-n-"><a class="header-link" href="#ip1-ip2-ip3-ip4-net-unpackip-ip-n-"></a>ip1, ip2, ip3, ip4 = net.unpackip(ip, &#39;*n&#39;)</h2>
<p>Returns an unpacked representation of an IPv4 address packed by net.packip 
function. The unpacket representation is provided by the 4 elements that make 
up an IPv4 address.</p>
<p>Arguments:</p>
<ul class="list">
<li>ip: the packet IP address</li>
</ul>
<p>Returns:</p>
<ul class="list">
<li>ip1: the first part of the ip address</li>
<li>ip2: the second part of the ip address</li>
<li>ip3: the third part of the ip address</li>
<li>ip4: the fourth part of the ip address</li>
</ul>
<pre class="hljs"><code>localhost = net.packip(<span class="hljs-string">"127.0.0.1"</span>)
ip1, ip2, ip3, ip4 = net.unpackip(localhost, <span class="hljs-string">'*n'</span>)
<span class="hljs-built_in">print</span>(ip1..<span class="hljs-string">" "</span>..ip2..<span class="hljs-string">" "</span>..ip3..<span class="hljs-string">" "</span>..ip4)
<span class="hljs-number">127</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">1</span></code></pre><h2 id="ip-net-unpackip-ip-s-"><a class="header-link" href="#ip-net-unpackip-ip-s-"></a>ip = net.unpackip(ip, &#39;*s&#39;)</h2>
<p>Returns an unpacked representation of an IPv4 address packed by net.packip 
function. The IP unpacket representation is provided as the IPv4 canonical 
representation.</p>
<p>Arguments:</p>
<ul class="list">
<li>ip: the packet IP address</li>
</ul>
<p>Returns: the IP addres string in  IPv4 canonical representation</p>
<pre class="hljs"><code>localhost = net.packip(<span class="hljs-string">"127.0.0.1"</span>)
ip = net.unpackip(localhost, <span class="hljs-string">'*s'</span>)
<span class="hljs-built_in">print</span>(ip)
<span class="hljs-number">127.0</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span></code></pre><h2 id="ip-net-lookup-hostname-"><a class="header-link" href="#ip-net-lookup-hostname-"></a>ip = net.lookup(hostname)</h2>
<p>Makes a DNS lookup.</p>
<p>Arguments:</p>
<ul class="list">
<li>hostname: the hostname to make the lookup</li>
</ul>
<p>Returns: the packet IP of the hostname.</p>
<pre class="hljs"><code>ip = net.lookup(<span class="hljs-string">"whitecat.org"</span>)
<span class="hljs-built_in">print</span>(net.unpackip(ip, <span class="hljs-string">"*s"</span>))
<span class="hljs-number">207.148</span><span class="hljs-number">.248</span><span class="hljs-number">.143</span></code></pre>    </article>
  </body>
</html>
